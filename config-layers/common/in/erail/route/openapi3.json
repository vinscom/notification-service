{
  "openapi" : "3.0.2",
  "info" : {
    "title" : "Notification Service",
    "version" : "1.0.0"
  },
  "paths" : {
    "/notification/device" : {
      "post" : {
        "tags" : [ "Notification" ],
        "summary" : "Create Endpoint",
        "operationId" : "ERAIL_NOTIFICATION_ADD_DEVICE",
        "requestBody" : {
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/Endpoint"
              }
            }
          },
          "required" : true
        },
        "responses" : {
          "200" : {
            "description" : "Success"
          }
        }
      }
    },
    "/notification/device/{user}/{token}" : {
      "delete" : {
        "tags" : [ "Notification" ],
        "summary" : "Delete device token",
        "operationId" : "ERAIL_NOTIFICATION_DELETE_DEVICE",
        "responses" : {
          "200" : {
            "description" : "Success"
          }
        }
      },
      "parameters" : [ {
        "name" : "user",
        "in" : "path",
        "description" : "User Id",
        "required" : true,
        "schema" : {
          "type" : "string"
        }
      }, {
        "name" : "token",
        "in" : "path",
        "description" : "Unique token specific to device",
        "required" : true,
        "schema" : {
          "type" : "string"
        }
      } ]
    },
    "/notification/publish/{user}/{group}" : {
      "post" : {
        "tags" : [ "Notification" ],
        "summary" : "Send message to target devices",
        "operationId" : "ERAIL_NOTIFICATION_PUBLISH",
        "requestBody" : {
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/Card"
              }
            }
          },
          "required" : true
        },
        "responses" : {
          "200" : {
            "description" : "Success"
          }
        }
      },
      "parameters" : [ {
        "name" : "user",
        "in" : "path",
        "description" : "User Id",
        "required" : true,
        "schema" : {
          "type" : "string"
        }
      }, {
        "name" : "group",
        "in" : "path",
        "description" : "Target device group",
        "required" : true,
        "schema" : {
          "enum" : [ "push", "email", "sms" ]
        }
      } ]
    },
    "/notification/aws/createendpoint/{token}" : {
      "post" : {
        "tags" : [ "AWS" ],
        "summary" : "Created Endpoint Hook",
        "operationId" : "ERAIL_NOTIFICATION_AWS_CREATE_ENDPOINT",
        "requestBody" : {
          "content" : {
            "application/json" : {
              "schema" : {
                "type" : "string"
              }
            }
          },
          "required" : true
        },
        "responses" : {
          "200" : {
            "description" : "Success"
          }
        }
      },
      "parameters" : [ {
        "name" : "token",
        "in" : "path",
        "description" : "token to make this url unique",
        "required" : true,
        "schema" : {
          "type" : "string"
        }
      } ]
    },
    "/notification/aws/deleteendpoint/{token}" : {
      "post" : {
        "tags" : [ "AWS" ],
        "summary" : "Delete Endpoint Hook",
        "operationId" : "ERAIL_NOTIFICATION_AWS_DELETE_ENDPOINT",
        "requestBody" : {
          "content" : {
            "application/json" : {
              "schema" : {
                "type" : "string"
              }
            }
          },
          "required" : true
        },
        "responses" : {
          "200" : {
            "description" : "Success"
          }
        }
      },
      "parameters" : [ {
        "name" : "token",
        "in" : "path",
        "description" : "token to make this url unique",
        "required" : true,
        "schema" : {
          "type" : "string"
        }
      } ]
    },
    "/notification/aws/deliveryfailure/{token}" : {
      "post" : {
        "tags" : [ "AWS" ],
        "summary" : "Delivery Failure Hook",
        "operationId" : "ERAIL_NOTIFICATION_AWS_DELIVERY_FAILED",
        "requestBody" : {
          "content" : {
            "application/json" : {
              "schema" : {
                "type" : "string"
              }
            }
          },
          "required" : true
        },
        "responses" : {
          "200" : {
            "description" : "Success"
          }
        }
      },
      "parameters" : [ {
        "name" : "token",
        "in" : "path",
        "description" : "token to make this url unique",
        "required" : true,
        "schema" : {
          "type" : "string"
        }
      } ]
    },
    "/notification/aws/updateendpoint/{token}" : {
      "post" : {
        "tags" : [ "AWS" ],
        "summary" : "Update Endpoint Hook",
        "operationId" : "ERAIL_NOTIFICATION_AWS_UPDATE_ENDPOINT",
        "requestBody" : {
          "content" : {
            "application/json" : {
              "schema" : {
                "type" : "string"
              }
            }
          },
          "required" : true
        },
        "responses" : {
          "200" : {
            "description" : "Success"
          }
        }
      },
      "parameters" : [ {
        "name" : "token",
        "in" : "path",
        "description" : "token to make this url unique",
        "required" : true,
        "schema" : {
          "type" : "string"
        }
      } ]
    }
  },
  "components" : {
    "schemas" : {
      "Endpoint" : {
        "title" : "Root Type for Endpoint",
        "description" : "Endpoint representing device",
        "required" : [ "type" ],
        "type" : "object",
        "properties" : {
          "user" : {
            "type" : "string"
          },
          "token" : {
            "description" : "Token given by external service",
            "type" : "string"
          },
          "type" : {
            "description" : "Type of token",
            "enum" : [ "APNS", "FCM", "APNS_SANDBOX" ]
          }
        },
        "example" : "{\n    \"user\" : \"userid\",\n    \"token\" : \"token\",\n    \"type\" : \"APNS\"\n}"
      },
      "Card" : {
        "title" : "Root Type for card",
        "description" : "The root of the card type's schema.",
        "type" : "object",
        "properties" : {
          "title" : {
            "description" : "Title text",
            "type" : "string"
          },
          "body" : {
            "description" : "Body text",
            "type" : "string"
          }
        },
        "example" : "{\n    \"title\" : \"Title\",\n    \"body\" : \"Body Content\"\n}"
      }
    }
  }
}